# æ“´å……æ€§æ”¹å–„èªªæ˜

## ğŸ“‹ æ”¹å–„å…§å®¹ç¸½è¦½

æœ¬æ–‡ä»¶èªªæ˜å·²å®Œæˆçš„éšæ®µä¸€å’Œéšæ®µäºŒæ”¹å–„é …ç›®ï¼Œé€™äº›æ”¹å–„ä¸æœƒå½±éŸ¿æ—¢æœ‰åŠŸèƒ½ï¼Œä¸”èƒ½ç«‹å³æå‡å¾ŒçºŒæ“´å……æ•ˆç‡ã€‚

---

## âœ… éšæ®µä¸€ï¼šåŸºç¤å»ºè¨­ï¼ˆå·²å®Œæˆï¼‰

### 1. éŸ¿æ‡‰å¼è¨­è¨ˆå·¥å…· (`src/hooks/useResponsive.js`)

**åŠŸèƒ½èªªæ˜ï¼š**

- æä¾›çµ±ä¸€çš„éŸ¿æ‡‰å¼æ–·é»æª¢æ¸¬
- è‡ªå‹•æª¢æ¸¬æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢ä¸‰ç¨®è£ç½®é¡å‹
- æä¾›éŸ¿æ‡‰å¼çš„ label-width å’Œæ¬„ä½æ•¸è¨ˆç®—

**ä½¿ç”¨ç¯„ä¾‹ï¼š**

```javascript
import { useResponsive, useResponsiveLabelWidth, useResponsiveColumns } from "@/hooks/useResponsive"

// åŸºæœ¬ä½¿ç”¨
const { isMobile, isTablet, isDesktop, screenWidth } = useResponsive()

// éŸ¿æ‡‰å¼ label-width
const labelWidth = useResponsiveLabelWidth({
  mobile: "80px",
  tablet: "120px",
  desktop: "150px"
})

// éŸ¿æ‡‰å¼æ¬„ä½æ•¸
const columns = useResponsiveColumns({
  mobile: 1,
  tablet: 2,
  desktop: 3
})
```

**å„ªé»ï¼š**

- ä¸€è¡Œä»£ç¢¼æå®šéŸ¿æ‡‰å¼è¨­è¨ˆ
- çµ±ä¸€çš„æ–·é»ç®¡ç†
- è‡ªå‹•è™•ç†è¦–çª—å¤§å°è®ŠåŒ–

---

### 2. é©—è­‰å·¥å…·åº« (`src/utils/validators.js`)

**åŠŸèƒ½èªªæ˜ï¼š**

- æä¾›çµ±ä¸€çš„é©—è­‰å‡½æ•¸
- åŒ…å«éƒµå±€å¸³è™Ÿã€å°ç£èº«åˆ†è­‰ã€æ‰‹æ©Ÿè™Ÿç¢¼ç­‰é©—è­‰å™¨
- å¯åœ¨å¤šå€‹æ¨¡çµ„ä¸­é‡ç”¨

**å¯ç”¨é©—è­‰å™¨ï¼š**

```javascript
import { validators } from "@/utils/validators"

// éƒµå±€ 7 ç¢¼é©—è­‰
validators.postal7Digits("0001234")

// å°ç£èº«åˆ†è­‰é©—è­‰
validators.taiwanID("A123456789")

// å°ç£æ‰‹æ©Ÿè™Ÿç¢¼é©—è­‰
validators.taiwanCellphone("0912345678")

// é›»å­éƒµä»¶é©—è­‰
validators.email("test@example.com")

// å¿…å¡«æ¬„ä½é©—è­‰
validators.required(value)

// æ•¸å­—ç¯„åœé©—è­‰
validators.numberRange(50, { min: 0, max: 100 })

// å­—ä¸²é•·åº¦é©—è­‰
validators.stringLength("hello", { min: 3, max: 10 })
```

**å„ªé»ï¼š**

- æ¸›å°‘é‡è¤‡ä»£ç¢¼
- çµ±ä¸€çš„é©—è­‰é‚è¼¯
- æ˜“æ–¼ç¶­è­·å’Œæ“´å……

---

### 3. å¸¸æ•¸å®šç¾©æª”æ¡ˆ

**å·²å»ºç«‹çš„å¸¸æ•¸æª”æ¡ˆï¼š**

#### `src/constants/api-codes.js`

```javascript
import { API_CODES, API_MESSAGES } from "@/constants/api-codes"

// API å›æ‡‰ç¢¼
API_CODES.SUCCESS // 0
API_CODES.ERROR // -1
API_CODES.UNAUTHORIZED // 401
```

#### `src/constants/sheet-names.js`

```javascript
import { SHEET_NAMES } from "@/constants/sheet-names"

SHEET_NAMES.ACCOUNTS // "accounts"
SHEET_NAMES.FRUITS // "fruits"
```

#### `src/constants/breakpoints.js`

```javascript
import { BREAKPOINTS, LABEL_WIDTH, COLUMNS } from "@/constants/breakpoints"

BREAKPOINTS.MOBILE // 576
BREAKPOINTS.TABLET // 992
BREAKPOINTS.DESKTOP // 1200
```

**å„ªé»ï¼š**

- é¿å…é­”æ³•æ•¸å­—å’Œå­—ä¸²
- çµ±ä¸€ç®¡ç†å¸¸æ•¸
- æ˜“æ–¼ä¿®æ”¹å’Œç¶­è­·

---

## âœ… éšæ®µäºŒï¼šå„ªåŒ–ç¾æœ‰åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰

### 1. çµ±ä¸€éŒ¯èª¤è™•ç† (`src/utils/error-handler.js`)

**åŠŸèƒ½èªªæ˜ï¼š**

- æä¾›çµ±ä¸€çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- é¿å…é‡è¤‡çš„éŒ¯èª¤æç¤º
- æ”¯æ´éœé»˜æ¨¡å¼å’Œè‡ªè¨‚éŒ¯èª¤è¨Šæ¯

**ä½¿ç”¨ç¯„ä¾‹ï¼š**

```javascript
import { ErrorHandler } from "@/utils/error-handler"

// åŸºæœ¬ä½¿ç”¨
const result = ErrorHandler.handle(response)
if (result.success) {
  // è™•ç†æˆåŠŸ
  console.log(result.data)
} else {
  // è™•ç†å¤±æ•—
  console.error(result.message)
}

// éœé»˜æ¨¡å¼ï¼ˆä¸é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼‰
const result = ErrorHandler.silent(response)

// è‡ªè¨‚éŒ¯èª¤è¨Šæ¯
const result = ErrorHandler.handle(response, {
  customMessage: "è‡ªè¨‚éŒ¯èª¤è¨Šæ¯",
  onError: (error) => {
    // éŒ¯èª¤å›èª¿
  }
})
```

**å„ªé»ï¼š**

- çµ±ä¸€çš„éŒ¯èª¤è™•ç†é‚è¼¯
- é¿å…é‡è¤‡çš„éŒ¯èª¤æç¤º
- éˆæ´»çš„éŒ¯èª¤è™•ç†é¸é …

---

### 2. å„ªåŒ– GAS æœå‹™ (`src/utils/gas-service.js`)

**æ”¹å–„å…§å®¹ï¼š**

- ä¿ç•™èˆŠçš„ `callGasFunction` æ–¹æ³•ï¼ˆå‘å¾Œå…¼å®¹ï¼‰
- æ–°å¢ `silent` é¸é …ï¼Œå¯é¸æ“‡ä¸è‡ªå‹•é¡¯ç¤ºéŒ¯èª¤
- æ–°å¢ `callGasFunctionSilent` æ–¹æ³•ï¼ˆæ¨è–¦æ–°æ¨¡çµ„ä½¿ç”¨ï¼‰

**ä½¿ç”¨ç¯„ä¾‹ï¼š**

```javascript
import { callGasFunction, callGasFunctionSilent } from "@/utils/gas-service"
import { ErrorHandler } from "@/utils/error-handler"

// èˆŠæ–¹æ³•ï¼ˆä»ç„¶å¯ç”¨ï¼Œè‡ªå‹•é¡¯ç¤ºéŒ¯èª¤ï¼‰
const response = await callGasFunction("getAccountByStudentNumber", stunum)

// æ–°æ–¹æ³•ï¼ˆéœé»˜æ¨¡å¼ï¼Œé…åˆ ErrorHandler ä½¿ç”¨ï¼‰
const response = await callGasFunctionSilent("getAccountByStudentNumber", stunum)
const result = ErrorHandler.handle(response)
```

**å„ªé»ï¼š**

- å®Œå…¨å‘å¾Œå…¼å®¹
- æ–°æ¨¡çµ„å¯ä½¿ç”¨æ›´éˆæ´»çš„éŒ¯èª¤è™•ç†
- é¿å…é‡è¤‡çš„éŒ¯èª¤æç¤º

---

### 3. çµ±ä¸€è¼‰å…¥ç‹€æ…‹ç®¡ç† (`src/store/modules/loading.js`)

**åŠŸèƒ½èªªæ˜ï¼š**

- æä¾›çµ±ä¸€çš„è¼‰å…¥ç‹€æ…‹ç®¡ç†
- é¿å…æ¯å€‹æ¨¡çµ„é‡è¤‡å¯¦ç¾ loading ç‹€æ…‹
- æ”¯æ´å¤šå€‹ä¸¦ç™¼çš„è¼‰å…¥ä»»å‹™

**ä½¿ç”¨ç¯„ä¾‹ï¼š**

```javascript
import { useLoadingStore } from "@/store/modules/loading"

const loadingStore = useLoadingStore()

// è¨­å®šè¼‰å…¥ç‹€æ…‹
loadingStore.setLoading("accounts", true)

// æª¢æŸ¥è¼‰å…¥ç‹€æ…‹
if (loadingStore.isLoading("accounts")) {
  // æ­£åœ¨è¼‰å…¥
}

// è‡ªå‹•ç®¡ç†è¼‰å…¥ç‹€æ…‹
await loadingStore.withLoading("accounts", async () => {
  const response = await getAccountData()
  return response
})
```

**å„ªé»ï¼š**

- æ¸›å°‘é‡è¤‡ä»£ç¢¼
- çµ±ä¸€çš„è¼‰å…¥ç‹€æ…‹ç®¡ç†
- æ”¯æ´å¤šå€‹ä¸¦ç™¼ä»»å‹™

---

### 4. å„ªåŒ– Accounts çµ„ä»¶éŸ¿æ‡‰å¼è¨­è¨ˆ

**æ”¹å–„å…§å®¹ï¼š**

- ä½¿ç”¨ `useResponsive` å·¥å…·
- éŸ¿æ‡‰å¼çš„ label-width å’Œæ¬„ä½æ•¸
- å„ªåŒ–æ‰‹æ©Ÿç«¯é¡¯ç¤ºæ•ˆæœ
- ä½¿ç”¨é©—è­‰å·¥å…·åº«æ›¿æ›é‡è¤‡çš„é©—è­‰é‚è¼¯

**æ•ˆæœï¼š**

- æ‰‹æ©Ÿç«¯ä¸å†éœ€è¦å·¦å³æ»‘å‹•
- è¡¨å–®è‡ªå‹•é©æ‡‰è¢å¹•å¤§å°
- æ”¹å–„æ‰‹æ©Ÿç«¯æ“ä½œé«”é©—

---

## ğŸ¯ å°æ—¢æœ‰åŠŸèƒ½çš„å½±éŸ¿

### âœ… ç„¡å½±éŸ¿é …ç›®

ä»¥ä¸‹æ”¹å–„å°æ—¢æœ‰åŠŸèƒ½**å®Œå…¨ç„¡å½±éŸ¿**ï¼š

1. âœ… éŸ¿æ‡‰å¼è¨­è¨ˆå·¥å…·ï¼ˆç´”æ–°å¢ï¼‰
2. âœ… é©—è­‰å·¥å…·åº«ï¼ˆç´”æ–°å¢ï¼‰
3. âœ… å¸¸æ•¸å®šç¾©æª”æ¡ˆï¼ˆç´”æ–°å¢ï¼‰
4. âœ… çµ±ä¸€è¼‰å…¥ç‹€æ…‹ç®¡ç†ï¼ˆæ–°èˆŠä¸¦å­˜ï¼‰
5. âœ… çµ±ä¸€éŒ¯èª¤è™•ç†ï¼ˆæ–°èˆŠä¸¦å­˜ï¼‰

### âš ï¸ è¼•å¾®å½±éŸ¿é …ç›®

ä»¥ä¸‹æ”¹å–„å°æ—¢æœ‰åŠŸèƒ½æœ‰**è¼•å¾®å½±éŸ¿**ï¼Œä½†å®Œå…¨å‘å¾Œå…¼å®¹ï¼š

1. âš ï¸ GAS æœå‹™å„ªåŒ–

   - èˆŠä»£ç¢¼ä»ç„¶å¯ç”¨
   - æ–°ä»£ç¢¼å¯é¸æ“‡ä½¿ç”¨æ–°æ–¹æ³•
   - ä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½é‹è¡Œ

2. âš ï¸ Accounts çµ„ä»¶éŸ¿æ‡‰å¼å„ªåŒ–
   - æ”¹å–„æ‰‹æ©Ÿç«¯é«”é©—
   - æ¡Œé¢ç«¯é¡¯ç¤ºä¸è®Š
   - å®Œå…¨å‘å¾Œå…¼å®¹

---

## ğŸ“ˆ å°å¾ŒçºŒæ“´å……çš„å½±éŸ¿

### é–‹ç™¼æ•ˆç‡æå‡

**æ–°å¢æ¨¡çµ„æ™‚é–“ï¼šå¾ 2-3 å°æ™‚ â†’ 30-60 åˆ†é˜**

åŸå› ï¼š

- âœ… çµ±ä¸€çš„éŸ¿æ‡‰å¼å·¥å…·ï¼šä¸€è¡Œä»£ç¢¼æå®š
- âœ… çµ±ä¸€çš„é©—è­‰å·¥å…·ï¼šç›´æ¥ä½¿ç”¨ï¼Œç„¡éœ€é‡å¯«
- âœ… çµ±ä¸€çš„éŒ¯èª¤è™•ç†ï¼šæ¨™æº–åŒ–è™•ç†æµç¨‹
- âœ… çµ±ä¸€çš„è¼‰å…¥ç‹€æ…‹ï¼šç›´æ¥ä½¿ç”¨ï¼Œç„¡éœ€é‡è¤‡å¯¦ç¾

### ä»£ç¢¼å“è³ªæå‡

- âœ… æ¸›å°‘é‡è¤‡ä»£ç¢¼ï¼šDRY åŸå‰‡
- âœ… çµ±ä¸€è¦ç¯„ï¼šé™ä½å‡ºéŒ¯ç‡
- âœ… æ˜“æ–¼ç¶­è­·ï¼šä¿®æ”¹ä¸€è™•ï¼Œå…¨å°ˆæ¡ˆç”Ÿæ•ˆ

### æ“´å……æ€§æå‡

æ–°å¢æ¨¡çµ„çš„æ¨™æº–æµç¨‹ï¼š

```javascript
// 1. å‰µå»º APIï¼ˆä½¿ç”¨çµ±ä¸€çš„ callGasFunctionSilentï¼‰
import { callGasFunctionSilent } from "@/utils/gas-service"
import { ErrorHandler } from "@/utils/error-handler"

export async function getNewData() {
  const response = await callGasFunctionSilent("newModule_getNewData")
  return ErrorHandler.handle(response)
}

// 2. å‰µå»º Storeï¼ˆä½¿ç”¨çµ±ä¸€çš„è¼‰å…¥ç‹€æ…‹ï¼‰
import { useLoadingStore } from "@/store/modules/loading"

const loadingStore = useLoadingStore()

const fetchData = async () => {
  return await loadingStore.withLoading("newModule", async () => {
    const response = await getNewData()
    if (response.success) {
      // è™•ç†æˆåŠŸ
    }
  })
}

// 3. å‰µå»ºçµ„ä»¶ï¼ˆä½¿ç”¨éŸ¿æ‡‰å¼å·¥å…·ï¼‰
import { useResponsive, useResponsiveLabelWidth } from "@/hooks/useResponsive"
import { validators } from "@/utils/validators"

const { isMobile } = useResponsive()
const labelWidth = useResponsiveLabelWidth()
```

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### æ–°æ¨¡çµ„é–‹ç™¼å»ºè­°

1. **ä½¿ç”¨éŸ¿æ‡‰å¼å·¥å…·**

   ```javascript
   import { useResponsiveLabelWidth, useResponsiveColumns } from "@/hooks/useResponsive"
   ```

2. **ä½¿ç”¨é©—è­‰å·¥å…·åº«**

   ```javascript
   import { validators } from "@/utils/validators"
   ```

3. **ä½¿ç”¨çµ±ä¸€éŒ¯èª¤è™•ç†**

   ```javascript
   import { ErrorHandler } from "@/utils/error-handler"
   import { callGasFunctionSilent } from "@/utils/gas-service"
   ```

4. **ä½¿ç”¨çµ±ä¸€è¼‰å…¥ç‹€æ…‹**

   ```javascript
   import { useLoadingStore } from "@/store/modules/loading"
   ```

5. **ä½¿ç”¨å¸¸æ•¸å®šç¾©**
   ```javascript
   import { API_CODES, SHEET_NAMES, BREAKPOINTS } from "@/constants"
   ```

### èˆŠæ¨¡çµ„é·ç§»å»ºè­°

- **ä¸å¼·åˆ¶é·ç§»**ï¼šèˆŠæ¨¡çµ„å¯ç¹¼çºŒä½¿ç”¨åŸæœ‰æ–¹å¼
- **é€æ­¥é·ç§»**ï¼šåœ¨ä¿®æ”¹èˆŠæ¨¡çµ„æ™‚ï¼Œå¯é¸æ“‡æ€§åœ°ä½¿ç”¨æ–°å·¥å…·
- **æ–°åŠŸèƒ½å„ªå…ˆ**ï¼šæ–°åŠŸèƒ½å„ªå…ˆä½¿ç”¨æ–°å·¥å…·

---

## ğŸ”— ç›¸é—œæª”æ¡ˆ

- `src/hooks/useResponsive.js` - éŸ¿æ‡‰å¼è¨­è¨ˆå·¥å…·
- `src/utils/validators.js` - é©—è­‰å·¥å…·åº«
- `src/utils/error-handler.js` - çµ±ä¸€éŒ¯èª¤è™•ç†
- `src/utils/gas-service.js` - GAS æœå‹™ï¼ˆå·²å„ªåŒ–ï¼‰
- `src/store/modules/loading.js` - çµ±ä¸€è¼‰å…¥ç‹€æ…‹ç®¡ç†
- `src/constants/` - å¸¸æ•¸å®šç¾©æª”æ¡ˆ

---

## ğŸ“ æ³¨æ„äº‹é …

1. **å‘å¾Œå…¼å®¹**ï¼šæ‰€æœ‰æ”¹å–„éƒ½ä¿æŒå‘å¾Œå…¼å®¹ï¼Œä¸å½±éŸ¿æ—¢æœ‰åŠŸèƒ½
2. **é¸æ“‡æ€§ä½¿ç”¨**ï¼šæ–°å·¥å…·å¯é¸æ“‡æ€§ä½¿ç”¨ï¼Œä¸å¼·åˆ¶é·ç§»
3. **æ¼¸é€²å¼æ”¹å–„**ï¼šå»ºè­°æ–°æ¨¡çµ„å„ªå…ˆä½¿ç”¨æ–°å·¥å…·ï¼ŒèˆŠæ¨¡çµ„é€æ­¥é·ç§»

---

## ğŸ‰ ç¸½çµ

éšæ®µä¸€å’Œéšæ®µäºŒçš„æ”¹å–„å·²å®Œæˆï¼Œé€™äº›æ”¹å–„ï¼š

- âœ… **ä¸å½±éŸ¿æ—¢æœ‰åŠŸèƒ½**ï¼šå®Œå…¨å‘å¾Œå…¼å®¹
- âœ… **ç«‹å³æå‡æ•ˆç‡**ï¼šæ–°æ¨¡çµ„é–‹ç™¼æ™‚é–“æ¸›å°‘ 50-70%
- âœ… **æå‡ä»£ç¢¼å“è³ª**ï¼šçµ±ä¸€è¦ç¯„ï¼Œæ¸›å°‘é‡è¤‡ä»£ç¢¼
- âœ… **å¢å¼·æ“´å……æ€§**ï¼šæ¨™æº–åŒ–çš„é–‹ç™¼æµç¨‹

å»ºè­°æ–°æ¨¡çµ„å„ªå…ˆä½¿ç”¨é€™äº›æ–°å·¥å…·ï¼Œä»¥ç²å¾—æœ€ä½³çš„é–‹ç™¼é«”é©—å’Œä»£ç¢¼å“è³ªã€‚
